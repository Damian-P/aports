diff --git a/test/functional/testnvim.lua b/test/functional/testnvim.lua
index 0a12cf0920..ed558faba4 100644
--- a/test/functional/testnvim.lua
+++ b/test/functional/testnvim.lua
@@ -525,6 +525,16 @@ function M.spawn_wait(...)
   return proc
 end
 
+math.randomseed(os.time())
+
+local testid = (function()
+  local id = 0
+  return function()
+    id = id + 1
+    return id
+  end
+end)()
+
 --- @class test.session.Opts
 --- Nvim CLI args
 --- @field args? string[]
@@ -554,11 +564,10 @@ function M._new_argv(...)
   local args = merge and { unpack(M.nvim_argv) } or { M.nvim_prog }
   if merge then
     table.insert(args, '--headless')
-    if _G._nvim_test_id then
-      -- Set the server name to the test-id for logging. #8519
-      table.insert(args, '--listen')
-      table.insert(args, _G._nvim_test_id)
-    end
+
+    _G._nvim_test_id = ('T%d'):format(testid())
+    table.insert(args, '--listen')
+    table.insert(args, _G._nvim_test_id)
   end
 
   local new_args --- @type string[]
@@ -984,14 +993,6 @@ function M.mkdir_p(path)
   return os.execute((is_os('win') and 'mkdir ' .. path or 'mkdir -p ' .. path))
 end
 
-local testid = (function()
-  local id = 0
-  return function()
-    id = id + 1
-    return id
-  end
-end)()
-
 return function()
   local g = getfenv(2)
 
@@ -1002,8 +1003,8 @@ return function()
 
   if before_each then
     before_each(function()
-      local id = ('T%d'):format(testid())
-      _G._nvim_test_id = id
+      -- local id = ('T%d'):format(testid())
+      -- _G._nvim_test_id = id
     end)
   end
 
