# Contributor: Adrian Siekierka <kontakt@asie.pl>
# Maintainer: Adrian Siekierka <kontakt@asie.pl>
pkgname=megazeux
pkgver=2.93c
pkgrel=0
pkgdesc="Game creation system"
url="https://www.digitalmzx.com/"
arch="all"
license="GPL-2.0-or-later"
makedepends="libpng-dev libvorbis-dev sdl3-dev zlib-dev"
subpackages="$pkgname-doc"
_srcprefix=mzx${pkgver/.}
source="${_srcprefix}src.tar.xz::https://www.digitalmzx.com/download.php?latest=src&ver=$pkgver"
builddir="$srcdir/$_srcprefix/"

build() {
	./config.sh \
		--platform unix \
		--prefix /usr \
		--bindir /usr/lib/megazeux \
		--libdir /usr/lib \
		--gamesdir /usr/bin \
		--enable-release --enable-lto \
		--enable-sdl3

	make
}

check() {
	make test
}

package() {
	make DESTDIR="$pkgdir/" install
}

sha512sums="
f9e1360d44aff0717973317ab6d471246728271d23099ba370e6abb946bf12107fd36c143789ec88a7e53c9e888f2bdd91725d43091304f4239a30ebfeb1df3b  mzx293csrc.tar.xz
"
